@page "/"
@using Demo.Models
@using FlintSoft.Controls.Models
@using static FlintSoft.Controls.Buttons.FSButton

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<EditForm Model="_model" OnValidSubmit="myFirstSubmit" class="first-form">
    <DataAnnotationsValidator />

    <FSFormRow>
        <FSInput Id="first-inp" Label="My first Input" @bind-Value="_model.FirstTextInput" ValidationFor="() => _model.FirstTextInput" />
    </FSFormRow>
    <FSFormRow>
        <FSDateInput Id="first-date" Label="My first Date" @bind-DateValue="_model.FirstDate" ValidationFor="() => _model.FirstDate" />
    </FSFormRow>
    <FSFormRow>
        <FSDropdown Id="first-dropdown" 
            TType="DropdownItem"
            Items="SelectableItems" 
            @bind-Item="_model.SelectedItem" 
            EmptyText="Bitte wählen Sie aus..."
            ValidationFor="() => _model.SelectedItem">
            <OptionValueTemplate Context="item">@item.Value</OptionValueTemplate>
        </FSDropdown>
    </FSFormRow>
    <FSFormRow>
        <FSDropdownContainer Label="Matchtyp" Id="matchtype">
            <InputSelect id="matchtype" @bind-Value="_model.MatchType" class="matchtype" >
                @foreach(MatchTypes m in Enum.GetValues(typeof(MatchTypes)))
                {
                    <option value="@m">@(m switch { MatchTypes.MATCH => "Meisterschaftsspiel", MatchTypes.CUP => "Cupspiel", MatchTypes.FRENDLY => "Freundschaftsspiel", _ => "" })</option>
                }
            </InputSelect>
        </FSDropdownContainer>
    </FSFormRow>
    <FSFormRow>
        <FSCheckbox Id="athome" Label="Heimspiel" @bind-CheckBoxValue="_model.IsAtHome" ValidationFor="() => _model.IsAtHome" />
    </FSFormRow>
    <FSFormRow>
        <FSDateTimeInput Id="when" Label="Spieltermin" @bind-DateTimeValue="_model.When" ValidationFor="() => _model.When" />
    </FSFormRow>
    <FSFormRow>
        Value:
        <p>@(System.Text.Json.JsonSerializer.Serialize(_model))</p>
    </FSFormRow>
    <FSFormButtonRow>
        <FSButton ButtonType="submit" Caption="Speichern" Style="ButtonStyle.PRIMARY" />
        <FSButton ButtonType="button" Caption="Abbrechen" Style="ButtonStyle.SECONDARY" OnClickCallback="abort" />
        <FSButton ButtonType="button" Caption="Set Item" Style="ButtonStyle.SUCCESS" OnClickCallback="setItem" />
        <FSButton ButtonType="button" Caption="Abbrechen" Style="ButtonStyle.DANGER" OnClickCallback="abort" />
    </FSFormButtonRow>
</EditForm>

<textarea>@TextArea</textarea>

@code {
    public string TextArea { get; set; } = "";

    public FirstInputs _model = new();

    void myFirstSubmit()
    {
        TextArea = "";
        TextArea = $"Text: {_model.FirstTextInput}, Date: {_model.FirstDate.Date.ToShortDateString()}";
    }

    void abort() {
        TextArea = "";
    }

    void setItem() {
        _model.SelectedItem = SelectableItems[2];
    }

    private List<DropdownItem> SelectableItems = new List<DropdownItem>(){
        new DropdownItem { Key = "first", Value = "First Entry" },
        new DropdownItem { Key = "second", Value = "Second Entry" },
        new DropdownItem { Key = "third", Value = "Third Entry" },
        new DropdownItem { Key = "fourth", Value = "Fourth Entry" }
    };
} 